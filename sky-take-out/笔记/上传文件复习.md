#### Controller
```java
@RestController
@RequestMapping("/admin/upload"){
    @Autowired
    private OssService ossService;
    /*上传文件的方法
     *@param file 文件参数-必须叫file,与前端的name对应
     * @param folder 存储文件夹 - 可选参数，默认"common/"
     * @return 统一格式的返回结果
     * 
     * */
    @PostMapping
    public Result<UploadResultDTO> upload(MulitpartFile file,
    @RequestParam(value="folder",required = "false",defaultValue = "common/")
            String folder){
        log.info("上传文件:{},大小:{},bytes,存储到:{}",file.getOriginFilename,file.getSize(),folder);
        UploadResultDTO result = ossService.upload(file,folder);
        return Result.success(result);
        
    }


}



```


```java
//MultipartFile 的常见方法
//获取原始文件名
String originName = file.getOriginaalFilename();//a.jpg

//获取文件大小(字节)
long size = file.getSize();

//获取文件类型
String contentType = file.getContentType();//"iamge/jpeg"

//获取文件内容
//方式一 获取输入流 最常用 适合上传到云存储
InputStream inputStream = file.getInputStream();

//方式二 获取字节数组 适合小文件 保存到数据库
byte[] bytes = file.getBytes();

//方式三 保存到本地文件系统
file.transferTo(new File("/path/to/save.jpg"));

//检查是否为空
boolean isEmpty = file.isEmpty();

//获取文件名(不带路径)
String name = file.getName();




```

#### OSS服务类

Bucket 桶 = 硬盘分区(如 d盘,e盘)
Object 对象= 硬盘里的文件
Endpoint端点 = 硬盘里的访问地址
AccessKey = 硬盘的钥匙

```java
@Service
@Slf4j
public class OssService{
    //1.注入oss客户端(由配置类创建)
    @Autowired
    private OSS ossClient;//这是阿里云的官方客户端
    
    //注入配置信息
    @Autowired
    private ossConfiguration ossConfig;
    
    public UploadResultDTO upload(MUltipartFile file,String folder) throws IOException{
        //原始文件名：用户上传时的文件名
        String originalFilename = file.getOriginalFielname(); //"我的头像.jpg"
        //获取文件扩展名:.jpg .png等
        String fileExtension = getFileExtension(originalFilename);//".jpg"
        //生成新文件名:时间戳+UUID
        String newFilename = generatNewFilename(fileExtension);//20260130_a.jpg
        //完整的对象名(在oss的路径)
        String objectName = folder+newFilename;//"avatars/xx.jpg"
        
        
        //上传到oss
        InputStram inputStream = file.getInputStream();
        //创建上传请求对象
        PutObjectRequest putObjectRequest =new PutObjectRequest(
                ossConfig.getBucketName(),
                objectName,
                inputStream
        );
        //执行上传
        ossClient.putObject(putObjectRequest);
        
        
        UploadResultDTO result = new UploadResultDTO();
        result.setOriginalFilename(originalFilename);
        result.setNewFilename(newFilename);
        result.setFileUrl(ossConfig.getUrlPrefix()+objectName);
        
        result.setFileSize(file.getSize());
        result.setFileType(file.getContentType());
        return result;
        
    }
    
    
    
}


```